# テーマ切り替え機能 仕様書

## 概要

小学生向けのひらがなUIと、ビジネスシーン向けの大人向けUIをワンクリックで切り替えられる機能を実装します。

## テーマの種類

### 1. キッズテーマ（デフォルト）
- **対象**: 小学生向け
- **文字**: ひらがな中心
- **色合い**: 明るくカラフル
- **フォント**: 丸みのあるフォント（M PLUS Rounded 1c）
- **スタイル**: 親しみやすく、遊び心のあるデザイン

### 2. ビジネステーマ
- **対象**: ビジネスシーン・大人向け
- **文字**: 漢字・カタカナ中心
- **色合い**: 落ち着いた色合い（グレー、ブルー、ダーク系）
- **フォント**: 読みやすいフォント（Hiragino Sans, Meiryo）
- **スタイル**: シンプルでプロフェッショナルなデザイン

## 切り替え方法

### UI配置
- ヘッダー右上にテーマ切り替えボタンを配置
- アイコン: 🎨 または 🌓
- ツールチップ: "テーマを切り替え"
- クリックで即座に切り替え

### 保存
- ユーザーの選択を`UserSettings`に保存
- IndexedDBで永続化
- 次回アクセス時に前回の選択を復元

## 変更要素

### 1. 文字表記

#### キッズテーマ（ひらがな）
- "ふつうのけいさん" → "ふつうのけいさん"
- "日づけ" → "日づけ"
- "たんい" → "たんい"
- "十二支" → "十二支"
- "うらない" → "うらない"
- "カート" → "カート"

#### ビジネステーマ（漢字・カタカナ）
- "ふつうのけいさん" → "標準計算"
- "日づけ" → "日付計算"
- "たんい" → "単位変換"
- "十二支" → "干支"
- "うらない" → "占い"
- "カート" → "ショッピングカート"

### 2. 色合い

#### キッズテーマ
- **背景**: 明るいパステル色（#f4e4c1, #d4c4a1）
- **ボタン**: カラフルなグラデーション
- **マグネット**: 赤、青、黄、緑、紫、オレンジ
- **アクセント**: 明るい色

#### ビジネステーマ
- **背景**: 落ち着いたグレー系（#f5f5f5, #e0e0e0）
- **ボタン**: シンプルなグレー・ブルー系
- **マグネット**: グレー、ブルー、ダーク系
- **アクセント**: プロフェッショナルな色

### 3. フォント

#### キッズテーマ
- `font-family: 'M PLUS Rounded 1c', sans-serif;`
- 丸みのあるフォント

#### ビジネステーマ
- `font-family: 'Hiragino Kaku Gothic ProN', 'メイリオ', 'Yu Gothic', sans-serif;`
- 読みやすいフォント

### 4. スタイル

#### キッズテーマ
- 角丸: 大きめ（12px）
- 影: 柔らかい影
- アニメーション: カラフル

#### ビジネステーマ
- 角丸: 小さめ（4-6px）
- 影: 控えめな影
- アニメーション: 最小限

## 実装方針

### 1. データ構造

```typescript
// src/types/index.ts
export interface UserSettings {
  // ... existing settings
  theme: 'kids' | 'business';
}

export const DEFAULT_SETTINGS: UserSettings = {
  // ... existing defaults
  theme: 'kids',
};
```

### 2. テキストマッピング

```typescript
// src/utils/themeText.ts
export const TEXT_MAPPING = {
  kids: {
    STANDARD: 'ふつうのけいさん',
    DATE: '日づけ',
    UNIT: 'たんい',
    ZODIAC: '十二支',
    FORTUNE: 'うらない',
    CART: 'カート',
    // ... その他のテキスト
  },
  business: {
    STANDARD: '標準計算',
    DATE: '日付計算',
    UNIT: '単位変換',
    ZODIAC: '干支',
    FORTUNE: '占い',
    CART: 'ショッピングカート',
    // ... その他のテキスト
  },
};
```

### 3. CSS変数

```css
/* キッズテーマ */
:root[data-theme="kids"] {
  --bg-primary: #f4e4c1;
  --bg-secondary: #d4c4a1;
  --text-primary: #1a3010;
  --accent-color: #667eea;
  --font-family: 'M PLUS Rounded 1c', sans-serif;
  --border-radius: 12px;
}

/* ビジネステーマ */
:root[data-theme="business"] {
  --bg-primary: #f5f5f5;
  --bg-secondary: #e0e0e0;
  --text-primary: #212121;
  --accent-color: #2196F3;
  --font-family: 'Hiragino Kaku Gothic ProN', 'メイリオ', sans-serif;
  --border-radius: 4px;
}
```

### 4. コンポーネント変更

- `App.tsx`: テーマ切り替えボタン追加
- `Calculator.tsx`: テキストをテーマに応じて切り替え
- `App.css`: CSS変数を使用してスタイルを切り替え

## UI要素の変更点

### ヘッダー
- モード選択ボタンのテキスト
- 背景色
- フォント

### 電卓パネル
- ボタンのスタイル
- 色合い
- フォント

### マグネット
- 色合い
- スタイル

### その他のUI要素
- 全てのテキスト
- ボタンスタイル
- カラーパレット

## 実装優先度

1. **高**: テーマ設定の保存・読み込み
2. **高**: テーマ切り替えボタン
3. **高**: 基本的な色・フォント切り替え
4. **中**: 全テキストのマッピング
5. **中**: スタイルの詳細調整

## 注意事項

- 既存の機能に影響を与えないこと
- パフォーマンスを考慮（CSS変数を使用）
- アクセシビリティを維持
- スマホでも見やすいこと
