@import"https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap";:root{--chalkboard-green: #2d5016;--chalkboard-dark: #1a3010;--chalkboard-light: #3a6020;--chalk-white: #f5f5dc;--chalk-yellow: #fff8a8;--chalk-pink: #ffb3d9;--chalk-blue: #a8d8ff;--chalk-orange: #ffcc99;--magnet-red: #ff6b6b;--magnet-blue: #4ecdc4;--magnet-yellow: #ffe66d;--magnet-green: #95e1d3;--magnet-purple: #c7b8ea;--magnet-orange: #ffa726;--wood-brown: #8b6f47;--wood-dark: #6b5638}:root[data-theme=kids],:root:not([data-theme]){--bg-primary: #f4e4c1;--bg-secondary: #d4c4a1;--bg-panel: rgba(255, 255, 255, .9);--bg-button: linear-gradient(180deg, rgba(255, 255, 255, .95) 0%, rgba(255, 255, 255, .85) 100%);--text-primary: #1a3010;--text-secondary: #666;--text-light: #f5f5dc;--accent-color: #667eea;--accent-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--font-family: "M PLUS Rounded 1c", "Hiragino Kaku Gothic ProN", "メイリオ", sans-serif;--border-radius: 12px;--border-radius-small: 8px;--shadow: 0 4px 6px rgba(0, 0, 0, .1);--shadow-lg: 0 8px 16px rgba(0, 0, 0, .15)}:root[data-theme=business]{--bg-primary: #f5f5f5;--bg-secondary: #e0e0e0;--bg-panel: rgba(255, 255, 255, .98);--bg-button: linear-gradient(180deg, #ffffff 0%, #f5f5f5 100%);--text-primary: #212121;--text-secondary: #757575;--text-light: #ffffff;--accent-color: #2196F3;--accent-gradient: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);--font-family: "Hiragino Kaku Gothic ProN", "メイリオ", "Yu Gothic", "Helvetica Neue", Arial, sans-serif;--border-radius: 4px;--border-radius-small: 4px;--shadow: 0 2px 4px rgba(0, 0, 0, .08);--shadow-lg: 0 4px 8px rgba(0, 0, 0, .12)}*{box-sizing:border-box;margin:0;padding:0}body{font-family:var(--font-family);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:linear-gradient(180deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);color:var(--text-primary);overflow:hidden}#root{width:100vw;height:100vh}.app{display:flex;flex-direction:column;width:100%;height:100%}.app-header{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1.5rem;background:linear-gradient(180deg,var(--wood-brown) 0%,var(--wood-dark) 100%);border-bottom:4px solid var(--wood-dark);box-shadow:0 4px 8px #0000004d,inset 0 1px #ffffff1a;z-index:100;position:relative;gap:1rem}.app-header:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent)}.app-title{font-size:1.5rem;font-weight:800;color:var(--chalk-yellow);text-shadow:2px 2px 0 rgba(0,0,0,.3),0 0 10px rgba(255,248,168,.5);letter-spacing:.05em;font-family:var(--font-family)}:root[data-theme=business] .app-title{color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.mode-selector{display:flex;gap:.75rem;flex-wrap:wrap}.mode-btn{padding:.5rem 1rem;background:var(--bg-button);color:var(--text-primary);border:2px solid var(--wood-dark);border-radius:var(--border-radius);cursor:pointer;font-size:.875rem;font-weight:700;transition:all .2s;box-shadow:var(--shadow);position:relative;top:0;font-family:var(--font-family)}.mode-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.mode-btn:active{transform:translateY(2px);box-shadow:var(--shadow)}.mode-btn.active{background:var(--accent-gradient);color:var(--text-light);border-color:var(--accent-color);box-shadow:var(--shadow-lg)}:root[data-theme=business] .mode-btn{border:1px solid #ddd;background:#fff;color:var(--text-primary)}:root[data-theme=business] .mode-btn:hover{background:#f5f5f5}:root[data-theme=business] .mode-btn.active{background:var(--accent-gradient);color:var(--text-light);border-color:var(--accent-color)}.blockly-link-btn{padding:.5rem 1rem;background:linear-gradient(180deg,var(--magnet-purple) 0%,#a47bc7 100%);color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:.75rem;cursor:pointer;font-size:.875rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:.25rem;transition:all .2s;box-shadow:0 3px #0003;position:relative;top:0;white-space:nowrap}.blockly-link-btn:hover{transform:translateY(-2px);box-shadow:0 5px #0003}.blockly-link-btn:active{transform:translateY(1px);box-shadow:0 2px #0003}.help-btn{width:2.5rem;height:2.5rem;background:linear-gradient(180deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff;border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;font-size:1.25rem;font-weight:800;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 3px #0003;position:relative;top:0}.help-btn:hover{transform:translateY(-2px);box-shadow:0 5px #0003}.help-btn:active{transform:translateY(1px);box-shadow:0 2px #0003}.currency-toggle-btn{width:2.5rem;height:2.5rem;border:2px solid rgba(255,255,255,.3);border-radius:50%;cursor:pointer;font-size:1rem;font-weight:800;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 3px #0003;position:relative;top:0}.currency-toggle-btn:hover{transform:translateY(-2px);box-shadow:0 5px #0003}.currency-toggle-btn:active{transform:translateY(1px);box-shadow:0 2px #0003}.help-overlay{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.help-modal{background:linear-gradient(135deg,#fff,#f8f8f8);border-radius:1.5rem;padding:2rem;max-width:600px;max-height:80vh;overflow-y:auto;box-shadow:0 20px 60px #00000080,inset 0 1px #fffc;border:4px solid var(--wood-brown);position:relative}.help-close{position:absolute;top:1rem;right:1rem;width:2rem;height:2rem;background:linear-gradient(180deg,var(--magnet-red) 0%,#ff5555 100%);color:#fff;border:none;border-radius:50%;cursor:pointer;font-size:1rem;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 2px 4px #0003}.help-close:hover{transform:scale(1.1)}.help-modal h2{font-size:1.75rem;font-weight:800;color:#333;margin-bottom:1.5rem;text-align:center;border-bottom:3px solid var(--chalk-yellow);padding-bottom:.75rem}.help-section{margin-bottom:1.5rem}.help-section h3{font-size:1.25rem;font-weight:700;color:var(--magnet-purple);margin-bottom:.75rem}.help-section ul{list-style:none;padding-left:0}.help-section li{padding:.5rem 0 .5rem 1.5rem;position:relative;line-height:1.6;color:#555}.help-section li:before{content:"•";position:absolute;left:.5rem;color:var(--magnet-blue);font-weight:700;font-size:1.25rem}.blockly-modal{background:linear-gradient(135deg,#fff,#f8f8f8);border-radius:1rem;padding:1.5rem;width:95vw;height:95vh;overflow:hidden;box-shadow:0 20px 60px #00000080,inset 0 1px #fffc;border:4px solid var(--wood-brown);position:relative;display:flex;flex-direction:column}.blockly-playground{width:100%;height:100%;display:flex;flex-direction:column;gap:1rem}.blockly-header{text-align:center}.blockly-header h2{font-size:1.75rem;font-weight:800;color:var(--magnet-purple);margin-bottom:.5rem}.blockly-header p{font-size:1rem;color:#666}.blockly-content{flex:1;display:flex;flex-direction:column;gap:1rem;min-height:0}.blockly-workspace{flex:1;border:3px solid var(--wood-brown);border-radius:1rem;background:linear-gradient(135deg,#fff8f0,#ffe8f5,#f0f8ff);background-size:400% 400%;animation:gradient-shift 15s ease infinite;min-height:500px;height:100%;width:100%;position:relative;overflow:hidden}@keyframes gradient-shift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.blockly-workspace:before{content:"";position:absolute;inset:0;background-image:radial-gradient(circle,rgba(255,182,193,.1) 1px,transparent 1px);background-size:20px 20px;pointer-events:none}.blockly-controls{display:flex;gap:1rem;justify-content:center}.blockly-btn{padding:.75rem 2rem;border:none;border-radius:.75rem;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 4px #0003;position:relative;top:0;display:flex;align-items:center;gap:.5rem}.blockly-btn:hover{transform:translateY(-2px);box-shadow:0 6px #0003}.blockly-btn:active{transform:translateY(2px);box-shadow:0 2px #0003}.blockly-btn-run{background:linear-gradient(180deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff}.blockly-btn-clear{background:linear-gradient(180deg,var(--magnet-red) 0%,#ff5555 100%);color:#fff}.blockly-output{padding:1rem;background:linear-gradient(135deg,var(--chalk-yellow) 0%,#ffd966 100%);border-radius:1rem;text-align:center}.blockly-output h3{font-size:1rem;font-weight:700;color:#333;margin-bottom:.5rem}.output-value{font-size:2rem;font-weight:800;color:#333;font-family:"M PLUS Rounded 1c",sans-serif}.blockly-error{padding:1rem;background:linear-gradient(135deg,var(--magnet-red) 0%,#ff5555 100%);color:#fff;border-radius:1rem;text-align:center;font-weight:700}.blockly-guide{padding:1rem;background:rgba(var(--chalkboard-green-rgb),.1);border-radius:1rem;border:2px dashed var(--magnet-purple)}.blockly-guide h3{font-size:1rem;font-weight:700;color:var(--magnet-purple);margin-bottom:.5rem}.blockly-guide ol{margin-left:1.5rem;color:#555}.blockly-guide li{margin-bottom:.25rem;line-height:1.6}.app-main{display:flex;flex:1;overflow:hidden}.calculator-panel{width:380px;background:linear-gradient(135deg,var(--chalkboard-green) 0%,var(--chalkboard-dark) 100%);border-right:8px solid var(--wood-brown);display:flex;flex-direction:column;box-shadow:inset 0 0 50px #0000004d,4px 0 12px #0006;position:relative;overflow-y:auto;max-height:100%}:root[data-theme=business] .calculator-panel{background:linear-gradient(135deg,#fff,#f8f9fa);border-right:1px solid #e0e0e0;box-shadow:2px 0 8px #00000014;color:var(--text-primary)}.calculator-panel::-webkit-scrollbar{width:10px}.calculator-panel::-webkit-scrollbar-track{background:#0003;border-radius:5px}.calculator-panel::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:5px;border:2px solid var(--chalkboard-green)}.calculator-panel::-webkit-scrollbar-thumb:hover{background:#ffffff80}.calculator-panel:before{content:"";position:absolute;inset:0;background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,255,255,.01) 2px,rgba(255,255,255,.01) 4px);pointer-events:none}.calculator-display{padding:1.5rem;background:#0000001a;min-height:120px;display:flex;flex-direction:column;justify-content:flex-end;gap:.5rem;border-bottom:3px dashed rgba(255,255,255,.2);position:relative;transition:all .3s;margin:1.25rem 1.25rem .75rem;border-radius:.5rem}.calculator-display.drag-over{background:#fff8a833;border-color:var(--chalk-yellow);box-shadow:0 0 20px #fff8a880}.drop-indicator{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;color:var(--chalk-yellow);padding:1.25rem 2rem;border-radius:1rem;font-size:1rem;font-weight:700;pointer-events:none;z-index:10;border:3px solid var(--chalk-yellow)}.calculator-formula{font-size:1rem;color:var(--chalk-pink);min-height:1.5rem;word-break:break-all;font-weight:500;text-shadow:0 0 5px rgba(255,179,217,.5)}.calculator-value{font-size:2.5rem;font-weight:800;color:var(--chalk-white);text-align:right;word-break:break-all;text-shadow:2px 2px 0 rgba(0,0,0,.2),0 0 10px rgba(245,245,220,.5);font-family:"M PLUS Rounded 1c",sans-serif}.calculator-buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:.625rem;padding:1.25rem;flex:1;position:relative}.calc-btn{padding:1.25rem;background:linear-gradient(180deg,#fffffff2,#ffffffd9);color:#333;border:none;border-radius:.875rem;font-size:1.5rem;font-weight:700;cursor:pointer;transition:all .15s;display:flex;align-items:center;justify-content:center;box-shadow:0 5px #0003,0 7px 10px #0000004d;position:relative;top:0;font-family:"M PLUS Rounded 1c",sans-serif}.calc-btn:hover{transform:translateY(-2px);box-shadow:0 7px #0003,0 9px 14px #0000004d}.calc-btn:active{transform:translateY(2px);box-shadow:0 3px #0003,0 5px 8px #0000004d}.calc-btn.operator{background:linear-gradient(180deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.calc-btn.operator:hover{background:linear-gradient(180deg,#5ed4cc,#4ecdc4)}.calc-btn.equals{background:linear-gradient(180deg,var(--magnet-green) 0%,#7fd1c3 100%);color:#fff;grid-column:span 2;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.calc-btn.equals:hover{background:linear-gradient(180deg,#a5e7d9,#95e1d3)}.calc-btn.clear{background:linear-gradient(180deg,var(--magnet-red) 0%,#ff5555 100%);color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.calc-btn.clear:hover{background:linear-gradient(180deg,#ff7b7b,#ff6b6b)}:root[data-theme=business] .calculator-panel:before{display:none}:root[data-theme=business] .calculator-panel::-webkit-scrollbar{width:8px}:root[data-theme=business] .calculator-panel::-webkit-scrollbar-track{background:#f5f5f5;border-radius:4px}:root[data-theme=business] .calculator-panel::-webkit-scrollbar-thumb{background:#bdbdbd;border-radius:4px}:root[data-theme=business] .calculator-panel::-webkit-scrollbar-thumb:hover{background:#9e9e9e}.canvas-container{flex:1;position:relative;overflow:auto;background:linear-gradient(135deg,var(--chalkboard-green) 0%,var(--chalkboard-dark) 100%);box-shadow:inset 0 0 50px #0000004d}:root[data-theme=business] .canvas-container{background:linear-gradient(135deg,#fafafa,#f5f5f5);box-shadow:inset 0 0 20px #0000000d}.canvas-toolbar{position:fixed;top:5rem;right:2rem;background:linear-gradient(135deg,#fff,#f8f8f8);border-radius:1rem;padding:1rem;box-shadow:0 8px 16px #0006,inset 0 1px #fffc;display:flex;gap:.75rem;align-items:center;z-index:100;border:3px solid var(--wood-brown)}.toolbar-info{font-size:.875rem;font-weight:700;color:#333;padding:.5rem .75rem;background:linear-gradient(135deg,var(--chalk-yellow) 0%,#ffd966 100%);border-radius:.5rem;white-space:nowrap}.toolbar-btn{padding:.5rem 1rem;background:linear-gradient(180deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff;border:none;border-radius:.75rem;font-size:.875rem;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 4px #0003;position:relative;top:0;white-space:nowrap}.toolbar-btn:hover{transform:translateY(-2px);box-shadow:0 6px #0003}.toolbar-btn:active{transform:translateY(2px);box-shadow:0 2px #0003}.toolbar-btn-danger{background:linear-gradient(180deg,var(--magnet-red) 0%,#ff5555 100%)}.canvas-container:before{content:"";position:absolute;inset:0;background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,255,255,.01) 2px,rgba(255,255,255,.01) 4px);pointer-events:none;z-index:1}.canvas{position:relative;min-width:100%;min-height:100%;z-index:2}.c-block{position:absolute;width:192px;min-height:112px;background:linear-gradient(135deg,#fff,#f0f0f0);border:none;border-radius:.8rem;box-shadow:0 6px 12px #0006,inset 0 1px #fffc,0 0 0 2px #ffffff4d;cursor:move;transition:all .2s;overflow:hidden}.c-block:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 30%,rgba(255,255,255,.3) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(0,0,0,.05) 0%,transparent 50%);pointer-events:none}.c-block:hover{transform:translateY(-3px) rotate(.5deg);box-shadow:0 10px 20px #00000080,inset 0 1px #fffc,0 0 0 2px #fff6}.c-block.dragging{opacity:.9;cursor:grabbing;z-index:1000;transform:rotate(3deg)}.c-block.selected{box-shadow:0 6px 12px #0006,inset 0 1px #fffc,0 0 0 3px var(--chalk-yellow),0 0 16px #fff8a899}.c-block-header{display:flex;align-items:center;justify-content:space-between;padding:.75rem;background:linear-gradient(135deg,var(--magnet-purple) 0%,#b5a7d9 100%);color:#fff;cursor:grab;border-bottom:2px solid rgba(255,255,255,.3)}.c-block-header:active{cursor:grabbing}.c-block-type{font-size:.7rem;font-weight:800;text-transform:uppercase;letter-spacing:.1em;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.c-block-actions{display:flex;gap:.375rem}.c-block-btn{width:1.5rem;height:1.5rem;background:#ffffff4d;border:1.5px solid rgba(255,255,255,.5);border-radius:.375rem;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:all .2s;box-shadow:0 2px 4px #0003}.c-block-btn:hover{background:#ffffff80;transform:scale(1.1)}.c-block-content{padding:.875rem;background:linear-gradient(135deg,#fff,#f8f8f8)}.c-block-formula{font-size:.8rem;color:#666;margin-bottom:.5rem;word-break:break-all;line-height:1.5;font-weight:500}.c-block-value{font-size:1.5rem;font-weight:800;color:#333;margin-bottom:.5rem;word-break:break-all;font-family:"M PLUS Rounded 1c",sans-serif}.c-block-memo{font-size:.7rem;color:#555;padding:.5rem;background:linear-gradient(135deg,#fff8dc,#ffefd5);border-radius:.375rem;margin-top:.5rem;white-space:pre-wrap;word-break:break-word;border:1.5px dashed #d4a574;box-shadow:inset 0 1px 3px #0000001a;transition:all .2s}.c-block-memo:hover{background:linear-gradient(135deg,#fff5cd,#ffeac5);border-color:#c79564;box-shadow:inset 0 1px 3px #00000026}.c-block-memo-edit{width:100%;padding:.5rem;background:#fff;color:#333;border:1.5px solid #d4a574;border-radius:.375rem;font-family:inherit;font-size:.7rem;resize:vertical;min-height:3rem;box-shadow:inset 0 1px 3px #0000001a}.c-block-memo-edit:focus{outline:none;border-color:var(--magnet-purple);box-shadow:inset 0 1px 3px #0000001a,0 0 0 3px #c7b8ea4d}.dependency-line{position:absolute;pointer-events:none;z-index:1}.dependency-line line{stroke:var(--chalk-blue);stroke-width:3;opacity:.6;stroke-dasharray:8,8;stroke-linecap:round}.dependency-line.highlighted line{stroke:var(--chalk-yellow);stroke-width:4;opacity:.9;stroke-dasharray:none;filter:drop-shadow(0 0 5px rgba(255,248,168,.8))}@keyframes pulse{0%,to{opacity:1}50%{opacity:.7}}.updating{animation:pulse .5s ease-in-out}.loading{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:1.5rem;font-weight:700;color:var(--chalk-yellow);text-shadow:0 0 10px rgba(255,248,168,.5)}.app-header:after{content:"";position:absolute;top:-20px;left:0;right:0;height:20px;background-image:repeating-linear-gradient(90deg,transparent,transparent 30px,var(--chalk-yellow) 30px,var(--chalk-yellow) 40px,var(--chalk-blue) 40px,var(--chalk-blue) 50px,var(--chalk-pink) 50px,var(--chalk-pink) 60px);clip-path:polygon(0 0,5% 0,7.5% 100%,10% 0,15% 0,17.5% 100%,20% 0,25% 0,27.5% 100%,30% 0,35% 0,37.5% 100%,40% 0,45% 0,47.5% 100%,50% 0,55% 0,57.5% 100%,60% 0,65% 0,67.5% 100%,70% 0,75% 0,77.5% 100%,80% 0,85% 0,87.5% 100%,90% 0,95% 0,97.5% 100%,100% 0,100% 100%,0 100%)}@media(max-width:768px){body{overflow:auto}.app{height:auto;min-height:100vh}.app-header{flex-direction:column;padding:.5rem 1rem;gap:.5rem}.app-title{font-size:1.25rem}.mode-selector{width:100%;justify-content:center;flex-wrap:wrap;gap:.5rem}.mode-btn{font-size:.75rem;padding:.5rem .75rem;min-width:auto;flex:1 1 auto;max-width:calc(50% - .25rem)}.help-btn,.blockly-link-btn,.currency-toggle-btn{padding:.5rem .75rem;font-size:.875rem}.cart-tabs{flex-wrap:wrap!important;gap:.5rem!important}.cart-tab{flex:1 1 auto;min-width:calc(33.333% - .5rem);font-size:.8rem!important;padding:.4rem .8rem!important}.fraction-input-container{padding:.75rem!important;margin:.5rem .75rem!important}.fraction-input-container input{width:70px!important;font-size:.9rem!important}.app-main{flex-direction:column;height:auto}.calculator-panel{width:100%;max-width:100%;border-right:none;border-bottom:4px solid var(--wood-brown)}.calculator-display{min-height:100px;padding:1rem}.calculator-formula{font-size:.875rem}.calculator-value{font-size:1.75rem}.calculator-buttons{padding:.75rem;gap:.5rem;grid-template-columns:repeat(4,1fr)!important}.calculator-buttons[style*="grid-template-columns: repeat(5"]{grid-template-columns:repeat(5,1fr)!important}.calc-btn{font-size:1.25rem;min-height:50px}.canvas-container{height:auto;min-height:60vh}.canvas{min-height:60vh}.c-block{width:150px;font-size:.75rem}.c-block-header{padding:.375rem .5rem;font-size:.625rem}.c-block-content{padding:.5rem}.c-block-formula{font-size:.625rem}.c-block-value{font-size:1.125rem}.c-block-memo{font-size:.625rem}.canvas-toolbar{flex-direction:column;align-items:stretch;gap:.5rem;padding:.75rem}.toolbar-info{text-align:center}.toolbar-btn{width:100%}.modal-overlay{padding:1rem}.help-modal,.blockly-modal{width:95vw;height:90vh;max-width:95vw;max-height:90vh;padding:1rem}.help-content h2{font-size:1.25rem}.help-content h3{font-size:1rem}.help-content p,.help-content li{font-size:.875rem}.blockly-header h2{font-size:1.25rem}.blockly-header p{font-size:.875rem}.blockly-workspace{min-height:300px}.blockly-controls{flex-direction:column;gap:.5rem}.blockly-btn{width:100%;padding:.75rem}.blockly-guide{font-size:.875rem}.blockly-guide ol{margin-left:1rem}}.blockly-category-すうがく .blocklyTreeLabel{background:linear-gradient(135deg,#ff9800,#ff6f00);color:#fff;font-weight:700}.blockly-category-ひかく .blocklyTreeLabel{background:linear-gradient(135deg,#03a9f4,#0277bd);color:#fff;font-weight:700}.blockly-category-じょうけん .blocklyTreeLabel{background:linear-gradient(135deg,#ffeb3b,#fbc02d);color:#000;font-weight:700}.blockly-category-くりかえし .blocklyTreeLabel{background:linear-gradient(135deg,#8bc34a,#689f38);color:#fff;font-weight:700}.blockly-category-もじ .blocklyTreeLabel{background:linear-gradient(135deg,#e91e63,#c2185b);color:#fff;font-weight:700}.blockly-category-リスト .blocklyTreeLabel{background:linear-gradient(135deg,#673ab7,#512da8);color:#fff;font-weight:700}@media(max-width:480px){.app-title{font-size:1.125rem}.mode-btn{font-size:.7rem;padding:.4rem .6rem;max-width:calc(50% - .25rem)}.calculator-value{font-size:1.5rem}.calc-btn{font-size:1.125rem;min-height:45px;padding:.875rem!important}.c-block{width:130px}.c-block-value{font-size:1rem}.canvas{min-height:50vh}.calculator-panel{padding:.75rem!important}.cart-tab{font-size:.7rem!important;padding:.35rem .6rem!important;min-width:calc(33.333% - .4rem)}.date-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin}.date-tab{font-size:.7rem;padding:.4rem .6rem;white-space:nowrap}.fortune-tab{font-size:.7rem;padding:.4rem .6rem}.zodiac-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch}.zodiac-tab{font-size:.7rem;padding:.4rem .6rem;white-space:nowrap}}.blockly-workspace .blocklyToolboxDiv{background:linear-gradient(180deg,#fff,#f8f9fa)!important;border-right:3px solid #e0e0e0!important;padding:1rem .5rem!important;box-shadow:2px 0 10px #0000001a!important}.blockly-workspace .blocklyTreeRow{margin:.5rem .25rem!important;border-radius:1rem!important;padding:.75rem 1rem!important;transition:all .2s ease!important;cursor:pointer!important;position:relative!important;overflow:hidden!important;box-shadow:0 3px #00000026!important}.blockly-workspace .blocklyTreeIcon{display:none!important}.blockly-workspace .blocklyTreeLabel{font-family:"M PLUS Rounded 1c",sans-serif!important;font-size:1rem!important;font-weight:700!important;text-align:center!important;display:block!important;color:#fff!important;text-shadow:1px 1px 2px rgba(0,0,0,.2)!important;letter-spacing:.05em!important}.blockly-workspace .blocklyTreeRow:hover{transform:translateY(-2px)!important;box-shadow:0 5px #00000026!important}.blockly-workspace .blocklyTreeRow:active{transform:translateY(1px)!important;box-shadow:0 2px #00000026!important}.blockly-workspace .blocklyTreeSelected{box-shadow:0 3px #0003,inset 0 0 0 2px #ffffff80!important}.blockly-workspace .blocklyTreeRow[style*="rgb(92, 129, 166)"],.blockly-workspace .blocklyTreeRow[style*="#5C81A6"]{background:linear-gradient(135deg,#4fc3f7,#42a5f5)!important;border:2px solid #29b6f6!important}.blockly-workspace .blocklyTreeRow[style*="rgb(92, 129, 166)"]:hover,.blockly-workspace .blocklyTreeRow[style*="#5C81A6"]:hover{background:linear-gradient(135deg,#5dd3ff,#50b5ff)!important}.blockly-workspace .blocklyTreeRow[style*="rgb(92, 166, 92)"],.blockly-workspace .blocklyTreeRow[style*="#5CA65C"]{background:linear-gradient(135deg,#66bb6a,#4caf50)!important;border:2px solid #43a047!important}.blockly-workspace .blocklyTreeRow[style*="rgb(92, 166, 92)"]:hover,.blockly-workspace .blocklyTreeRow[style*="#5CA65C"]:hover{background:linear-gradient(135deg,#76cb7a,#5cbf60)!important}.blockly-workspace .blocklyTreeRow[style*="rgb(165, 92, 156)"],.blockly-workspace .blocklyTreeRow[style*="#A55C9C"]{background:linear-gradient(135deg,#ba68c8,#ab47bc)!important;border:2px solid #9c27b0!important}.blockly-workspace .blocklyTreeRow[style*="rgb(165, 92, 156)"]:hover,.blockly-workspace .blocklyTreeRow[style*="#A55C9C"]:hover{background:linear-gradient(135deg,#ca78d8,#bb57cc)!important}.blockly-workspace .blocklyPath{filter:drop-shadow(2px 2px 3px rgba(0,0,0,.2))!important}.blockly-workspace .blocklyScrollbarHandle{fill:#bbb!important;rx:4!important;ry:4!important}.blockly-workspace .blocklyScrollbarHandle:hover{fill:#999!important}.blockly-workspace .blocklyGridPattern line{stroke:#c896c81a!important}.blockly-workspace .blocklyTrash{filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))!important}.blockly-workspace .blocklyZoom image{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))!important}.condense-btn{position:fixed;top:6rem;left:420px;width:3.5rem;height:3.5rem;border-radius:50%;background:linear-gradient(135deg,#ff6b6b,#f55);color:#fff;border:3px solid var(--wood-brown);font-size:1.5rem;font-weight:800;cursor:pointer;box-shadow:0 8px 16px #0006,inset 0 1px #ffffff4d;transition:all .2s;z-index:100;display:flex;align-items:center;justify-content:center}.condense-btn:hover{transform:translateY(-2px);box-shadow:0 12px 20px #00000080}.condense-btn:active{transform:translateY(0);box-shadow:0 4px 8px #0000004d}@media(min-width:769px)and (max-width:1024px){.app-header{padding:.5rem 1rem}.app-title{font-size:1.25rem}.mode-btn{font-size:.7rem;padding:.4rem .75rem}.help-btn,.blockly-link-btn,.currency-toggle-btn{font-size:.75rem;padding:.4rem .6rem}.calculator-panel{width:320px;position:absolute;left:1rem;bottom:1rem;top:auto;border-right:4px solid var(--wood-brown);border-radius:1rem;z-index:50}.calculator-display{min-height:90px;padding:.75rem}.calculator-formula{font-size:.75rem}.calculator-value{font-size:1.5rem}.calculator-buttons{padding:.5rem;gap:.4rem}.calc-btn{font-size:1.125rem;min-height:45px}.canvas-container{width:100%}.condense-btn{top:5.5rem;right:1.5rem;left:auto;width:3rem;height:3rem;font-size:1.25rem}.canvas-toolbar{top:4.5rem;right:1.5rem;padding:.75rem;gap:.5rem}.toolbar-btn{font-size:.875rem;padding:.5rem .75rem}}@media(max-width:1024px){.mode-selector{gap:.25rem}.mode-btn{font-size:.65rem;padding:.35rem .5rem;white-space:nowrap}.condense-btn{top:auto;bottom:6rem;left:1rem;width:3rem;height:3rem;font-size:1.25rem}}.zodiac-calculator{padding:1rem 1rem 3rem;display:flex;flex-direction:column;gap:1rem;overflow-y:visible;min-height:100%}.zodiac-input-group{display:flex;flex-direction:column;gap:.3rem;margin:.8rem 0}.zodiac-label{font-size:.8rem;font-weight:700;color:var(--chalk-white)}:root[data-theme=business] .zodiac-label{color:var(--text-primary);text-shadow:none}.zodiac-year-input{padding:.75rem;font-size:1.25rem;font-weight:700;font-family:"M PLUS Rounded 1c",sans-serif;border:3px solid var(--wood-brown);border-radius:.5rem;background:var(--chalk-white);color:#333;text-align:center}.zodiac-year-input:focus{outline:none;border-color:var(--magnet-purple);box-shadow:0 0 0 3px #c7b8ea4d}.zodiac-calculate-btn{padding:.7rem;font-size:.88rem;font-weight:800;font-family:"M PLUS Rounded 1c",sans-serif;background:linear-gradient(135deg,var(--magnet-purple) 0%,#b5a7d9 100%);color:#fff;border:2px solid var(--wood-brown);border-radius:.5rem;cursor:pointer;transition:all .2s;box-shadow:0 3px 6px #0000004d;margin-top:.5rem;margin-bottom:2.5rem}.zodiac-calculate-btn:hover{transform:translateY(-2px);box-shadow:0 5px 10px #0006}.zodiac-calculate-btn:active{transform:translateY(0);box-shadow:0 2px 4px #0000004d}.zodiac-help{padding:.5rem;background:#ffffff1a;border-radius:.4rem;border:2px dashed rgba(255,255,255,.3);margin-top:.5rem}.zodiac-year-select{padding:.5rem;font-size:1rem;font-weight:700;font-family:var(--font-family);border:2px solid var(--wood-brown);border-radius:.5rem;background:var(--chalk-white);color:#333;text-align:center;cursor:pointer}:root[data-theme=business] .zodiac-year-select{border:1px solid #ddd;border-radius:4px;background:#fff}.zodiac-year-select:focus{outline:none;border-color:var(--magnet-purple);box-shadow:0 0 0 2px #c7b8ea4d}.zodiac-result{min-height:45px;display:flex;align-items:center;justify-content:center;margin-top:2.5rem;margin-bottom:1rem}.zodiac-info{text-align:center;padding:.8rem;margin-top:1.5rem;margin-bottom:1rem;background:linear-gradient(135deg,#c7b8ea33,#b5a7d933);border-radius:.4rem;border:2px solid var(--magnet-purple);min-height:2rem;line-height:1.6}.zodiac-display{font-size:1.3rem;font-weight:800;color:var(--chalk-white);margin-bottom:.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.3);line-height:1.4}.age-display{font-size:.85rem;font-weight:700;color:var(--chalk-yellow);text-shadow:1px 1px 2px rgba(0,0,0,.3);margin-bottom:.5rem;line-height:1.5}.zodiac-wheel-container{position:relative;width:150px;height:150px;margin:.3rem auto}.zodiac-wheel-image{width:100%;height:100%;object-fit:contain;pointer-events:none}.zodiac-wheel-buttons{position:absolute;top:0;left:0;width:100%;height:100%}.zodiac-wheel-btn{position:absolute;width:30px;height:30px;background:#ffffffe6;border:2px solid var(--magnet-purple);border-radius:50%;font-size:1.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;box-shadow:0 2px 8px #0003}.zodiac-wheel-btn:hover{transform:scale(1.1);border-color:#c7b8ea;box-shadow:0 0 12px #c7b8eacc;z-index:10}.zodiac-wheel-btn:active{transform:scale(1)}.zodiac-rat{top:-20px;left:50%;transform:translate(-50%)}.zodiac-rat:hover{transform:translate(-50%) scale(1.1)}.zodiac-ox{top:-3px;right:12px}.zodiac-tiger{top:32px;right:-22px}.zodiac-rabbit{top:50%;right:-25px;transform:translateY(-50%)}.zodiac-rabbit:hover{transform:translateY(-50%) scale(1.1)}.zodiac-dragon{bottom:32px;right:-22px}.zodiac-snake{bottom:-3px;right:12px}.zodiac-horse{bottom:-20px;left:50%;transform:translate(-50%)}.zodiac-horse:hover{transform:translate(-50%) scale(1.1)}.zodiac-sheep{bottom:-3px;left:12px}.zodiac-monkey{bottom:32px;left:-22px}.zodiac-rooster{top:50%;left:-25px;transform:translateY(-50%)}.zodiac-rooster:hover{transform:translateY(-50%) scale(1.1)}.zodiac-dog{top:32px;left:-22px}.zodiac-pig{top:-3px;left:12px}.zodiac-years-list{background:linear-gradient(135deg,#c7b8ea26,#b5a7d926);border:2px solid var(--magnet-purple);border-radius:.5rem;padding:1rem;margin:.5rem 0 2rem;max-height:400px;overflow-y:auto;width:100%;box-sizing:border-box;min-height:200px}.zodiac-years-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:2px solid var(--magnet-purple)}.zodiac-years-header h3{margin:0;font-size:1rem;font-weight:800;color:var(--chalk-white);text-shadow:1px 1px 2px rgba(0,0,0,.3)}.zodiac-close-btn{background:#ffffffe6;border:2px solid var(--wood-brown);border-radius:50%;width:26px;height:26px;font-size:1rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.zodiac-close-btn:hover{background:var(--magnet-red);color:#fff;transform:scale(1.1)}.zodiac-years-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:.8rem;padding:.5rem 0}.zodiac-year-item{background:#fffffff2;border:2px solid var(--magnet-purple);border-radius:.4rem;padding:.5rem .4rem;cursor:pointer;transition:all .2s ease;font-family:"M PLUS Rounded 1c",sans-serif;text-align:center;min-width:0}.zodiac-year-item:hover{background:#c7b8eaf2;transform:translateY(-2px);box-shadow:0 4px 12px #c7b8ea99}.zodiac-year-item:active{transform:translateY(-1px)}.year-text{font-size:.95rem;font-weight:800;color:var(--wood-brown);margin-bottom:.15rem}.age-text{font-size:.75rem;font-weight:600;color:var(--magnet-purple)}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.fade-in{animation:fadeIn .5s ease-out}.zodiac-wheel-btn.current-year{background:linear-gradient(135deg,var(--chalk-yellow) 0%,#ffd966 100%);border-color:#d4a000;box-shadow:0 0 20px #fff8a8cc;animation:pulse-glow 2s ease-in-out infinite}@keyframes pulse-glow{0%,to{box-shadow:0 0 20px #fff8a8cc}50%{box-shadow:0 0 30px #fff8a8}}.zodiac-wheel-btn.selected-zodiac{background:linear-gradient(135deg,var(--magnet-purple) 0%,#b5a7d9 100%);border-color:var(--magnet-purple);box-shadow:0 0 25px #c7b8eae6;transform:scale(1.15)}.this-year-btn{width:100%;padding:.7rem;margin:.5rem 0;font-size:.88rem;font-weight:800;font-family:"M PLUS Rounded 1c",sans-serif;background:linear-gradient(135deg,var(--chalk-yellow) 0%,#ffd966 100%);color:#333;border:2px solid var(--wood-brown);border-radius:.5rem;cursor:pointer;transition:all .2s;box-shadow:0 3px 6px #0000004d}.this-year-btn:hover{transform:translateY(-2px);box-shadow:0 5px 10px #0006}.this-year-btn:active{transform:translateY(0);box-shadow:0 2px 4px #0000004d}.zodiac-tabs{display:flex;gap:.25rem;margin-bottom:.75rem;overflow-x:auto;flex-shrink:0;min-height:48px;padding-bottom:.5rem;position:sticky;top:0;background:linear-gradient(135deg,var(--chalkboard-green) 0%,var(--chalkboard-dark) 100%);z-index:10}.zodiac-tab{flex:1;padding:.5rem .25rem;font-size:.7rem;font-weight:700;background:#fff9;color:#666;border:2px solid var(--wood-brown);border-radius:.5rem;cursor:pointer;transition:all .2s;white-space:nowrap}.zodiac-tab:hover{background:#fffc}.zodiac-tab.active{background:linear-gradient(135deg,var(--magnet-purple) 0%,#b5a7d9 100%);color:#fff;border-color:var(--magnet-purple);box-shadow:0 2px 6px #c7b8ea80}.zodiac-details{margin-top:.75rem;padding:.75rem;background:#fffffff2;border-radius:.4rem;text-align:left;font-size:.75rem;color:#333;line-height:1.8}.zodiac-details p{margin:.5rem 0}.zodiac-details strong{color:var(--magnet-purple)}.zodiac-age-calculator h3{font-size:1rem;font-weight:800;color:var(--chalk-white);margin-bottom:.75rem;text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.family-section{margin-top:1rem;padding:.75rem;background:#ffffff1a;border-radius:.5rem;border:2px solid rgba(255,255,255,.3)}.family-section h3{font-size:.9rem;font-weight:800;color:var(--chalk-white);margin-bottom:.5rem;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.add-member-form{display:flex;gap:.5rem;margin-bottom:.75rem}.member-name-input{flex:1;padding:.5rem;font-size:.85rem;font-weight:600;font-family:"M PLUS Rounded 1c",sans-serif;border:2px solid var(--wood-brown);border-radius:.4rem;background:var(--chalk-white);color:#333}.member-name-input:focus{outline:none;border-color:var(--magnet-purple);box-shadow:0 0 0 2px #c7b8ea4d}.add-member-btn{padding:.5rem 1rem;font-size:.85rem;font-weight:700;background:linear-gradient(135deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff;border:2px solid var(--wood-brown);border-radius:.4rem;cursor:pointer;transition:all .2s}.add-member-btn:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}.family-list{display:flex;flex-direction:column;gap:.5rem}.family-member{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:#fffffff2;border-radius:.4rem;border:2px solid var(--magnet-purple)}.member-emoji{font-size:1.5rem}.member-name{flex:1;font-size:.85rem;font-weight:700;color:#333}.member-year{font-size:.75rem;color:#666}.remove-member-btn{width:1.5rem;height:1.5rem;background:var(--magnet-red);color:#fff;border:none;border-radius:50%;cursor:pointer;font-size:.75rem;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s}.remove-member-btn:hover{transform:scale(1.1);box-shadow:0 2px 6px #0000004d}.zodiac-compatibility h3{font-size:1rem;font-weight:800;color:var(--chalk-white);margin-bottom:.75rem;text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.compat-selector{display:flex;flex-direction:column;gap:.75rem;margin-bottom:.75rem}.compat-group label{display:block;font-size:.75rem;font-weight:700;color:var(--chalk-white);margin-bottom:.3rem;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.zodiac-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.4rem}.zodiac-grid-btn{padding:.75rem;font-size:1.5rem;background:#ffffffe6;border:2px solid var(--magnet-purple);border-radius:.5rem;cursor:pointer;transition:all .2s}.zodiac-grid-btn:hover{transform:scale(1.05);box-shadow:0 4px 8px #c7b8ea80}.zodiac-grid-btn.selected{background:linear-gradient(135deg,var(--magnet-purple) 0%,#b5a7d9 100%);border-color:var(--wood-brown);box-shadow:0 0 15px #c7b8eacc;transform:scale(1.1)}.compat-vs{text-align:center;font-size:1.5rem;font-weight:800;color:var(--chalk-yellow);text-shadow:2px 2px 4px rgba(0,0,0,.3)}.compatibility-result{padding:.75rem;border-radius:.5rem;margin-top:.75rem;text-align:center}.compatibility-result h4{font-size:1.25rem;font-weight:800;color:#fff;margin-bottom:.5rem;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.compatibility-result p{font-size:.85rem;font-weight:600;color:#fff;line-height:1.5}.zodiac-info-section h3{font-size:1rem;font-weight:800;color:var(--chalk-white);margin-bottom:.75rem;text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.info-content{max-height:450px;overflow-y:auto}.info-box{margin-bottom:1rem;padding:.75rem;background:#fffffff2;border-radius:.5rem;border:2px solid var(--magnet-purple)}.info-box h4{font-size:.9rem;font-weight:800;color:var(--magnet-purple);margin-bottom:.5rem}.info-box p{font-size:.75rem;color:#333;line-height:1.6}.zodiac-list{display:flex;flex-direction:column;gap:.5rem}.zodiac-list-item{display:flex;align-items:center;gap:.75rem;padding:.5rem;background:#c7b8ea1a;border-radius:.4rem;border:1px solid rgba(199,184,234,.3)}.zodiac-emoji-large{font-size:2rem}.zodiac-list-info{flex:1;font-size:.75rem;color:#333}.zodiac-list-info strong{font-size:.9rem;color:var(--magnet-purple)}.zodiac-quiz h3{font-size:1rem;font-weight:800;color:var(--chalk-white);margin-bottom:.75rem;text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.quiz-score{text-align:center;font-size:1rem;font-weight:800;color:var(--chalk-yellow);margin-bottom:.75rem;padding:.5rem;background:#0003;border-radius:.5rem;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.quiz-mode-selector{display:flex;gap:.5rem;margin-bottom:.75rem}.quiz-mode-selector button{flex:1;padding:.5rem;font-size:.85rem;font-weight:700;background:#fff9;color:#666;border:2px solid var(--wood-brown);border-radius:.5rem;cursor:pointer;transition:all .2s}.quiz-mode-selector button:hover{background:#fffc}.quiz-mode-selector button.active{background:linear-gradient(135deg,var(--magnet-green) 0%,#7fd1c3 100%);color:#fff;border-color:var(--magnet-green)}.quiz-question{padding:.75rem;background:#ffffff1a;border-radius:.5rem;border:2px solid rgba(255,255,255,.3);margin-bottom:.75rem}.quiz-question h4{font-size:1rem;font-weight:800;color:var(--chalk-white);margin-bottom:.75rem;text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.quiz-question p{font-size:.7rem;color:var(--chalk-pink);text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.year-options{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}.year-option-btn{padding:.75rem;font-size:.85rem;font-weight:700;background:#ffffffe6;color:#333;border:2px solid var(--magnet-purple);border-radius:.5rem;cursor:pointer;transition:all .2s}.year-option-btn:hover{background:linear-gradient(135deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff;transform:scale(1.05)}.quiz-correct{text-align:center;font-size:1.5rem;font-weight:800;color:var(--chalk-yellow);padding:1rem;background:#0000004d;border-radius:.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.5)}@media(max-width:768px){.zodiac-tabs{gap:.2rem}.zodiac-tab{font-size:.65rem;padding:.4rem .2rem}.zodiac-details{font-size:.65rem}.zodiac-grid{grid-template-columns:repeat(3,1fr)}.family-section{padding:.5rem}.info-content{max-height:350px}.quiz-question h4{font-size:.9rem}}.date-calculator{padding:1rem 1rem 3rem;display:flex;flex-direction:column;gap:1rem;overflow-y:visible;min-height:100%}.date-tabs{display:flex;gap:.3rem;margin-bottom:.5rem;flex-wrap:wrap;flex-shrink:0;min-height:48px;padding-bottom:.5rem;overflow-x:auto;-webkit-overflow-scrolling:touch}.date-tab{flex:1;min-width:70px;padding:.5rem .3rem;background:#ffffffe6;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .3s ease;font-size:.7rem;font-weight:700;color:#000}.date-tab:hover{background:#fffffff2;transform:translateY(-2px)}.date-tab.active{background:linear-gradient(135deg,#a8edea,#fed6e3);border-color:var(--chalk-pink);color:#000;box-shadow:0 4px 15px #a8edea66}.date-tab-content{animation:fadeIn .5s ease-out}.date-tab-content h3{font-size:1rem;margin-bottom:1rem;color:var(--chalk-yellow);text-align:center;text-shadow:1px 1px 2px rgba(0,0,0,.3)}:root[data-theme=business] .date-tab-content h3{color:var(--text-primary);text-shadow:none;font-weight:600}.date-input-section{background:#ffffff26;border-radius:12px;padding:1rem;margin-bottom:1rem}:root[data-theme=business] .date-input-section{background:#ffffffb3;border:1px solid #e0e0e0;border-radius:8px}.date-input-group{display:flex;flex-direction:column;gap:.3rem;margin-bottom:.8rem}.date-label{font-size:.8rem;font-weight:700;color:var(--chalk-white);text-shadow:1px 1px 2px rgba(0,0,0,.3)}.date-input{padding:.75rem;font-size:1rem;font-weight:700;font-family:var(--font-family);border:3px solid var(--wood-brown);border-radius:.5rem;background:var(--chalk-white);color:#000;text-align:center}:root[data-theme=business] .date-input{border:1px solid #ddd;border-radius:4px;background:#fff;font-family:var(--font-family)}.date-input:focus{outline:none;border-color:var(--magnet-purple);box-shadow:0 0 0 3px #c7b8ea4d}.date-amount-input{flex:1;padding:.75rem;font-size:1rem;font-weight:700;font-family:"M PLUS Rounded 1c",sans-serif;border:3px solid var(--wood-brown);border-radius:.5rem;background:var(--chalk-white);color:#000;text-align:center}.date-amount-input:focus{outline:none;border-color:var(--magnet-purple);box-shadow:0 0 0 3px #c7b8ea4d}.date-unit-select{padding:.75rem;font-size:1rem;font-weight:700;font-family:"M PLUS Rounded 1c",sans-serif;border:3px solid var(--wood-brown);border-radius:.5rem;background:var(--chalk-white);color:#000;cursor:pointer}.date-unit-select:focus{outline:none;border-color:var(--magnet-purple);box-shadow:0 0 0 3px #c7b8ea4d}.date-operation-selector{display:flex;gap:.5rem;margin-bottom:1rem}.date-op-btn{flex:1;padding:.6rem;font-size:.85rem;font-weight:700;background:#ffffffe6;color:#000;border:2px solid var(--wood-brown);border-radius:.5rem;cursor:pointer;transition:all .2s}.date-op-btn:hover{background:#fffffff2;transform:translateY(-2px)}.date-op-btn.active{background:linear-gradient(135deg,var(--magnet-blue) 0%,#3eb8b0 100%);color:#fff;border-color:var(--magnet-blue)}.date-calculate-btn{width:100%;padding:.7rem;font-size:.88rem;font-weight:800;font-family:var(--font-family);background:linear-gradient(135deg,var(--magnet-purple) 0%,#b5a7d9 100%);color:#fff;border:2px solid var(--wood-brown);border-radius:.5rem;cursor:pointer;transition:all .2s;box-shadow:0 3px 6px #0000004d;margin-top:.5rem;margin-bottom:1rem}.date-calculate-btn:hover{transform:translateY(-2px);box-shadow:0 5px 10px #0006}.date-calculate-btn:active{transform:translateY(0);box-shadow:0 2px 4px #0000004d}.date-result{margin-top:1rem;padding:.75rem;background:#fffffff2;border-radius:.5rem;border:2px solid var(--magnet-purple)}.date-result h4{font-size:.9rem;font-weight:800;color:var(--magnet-purple);margin-bottom:.5rem}.date-result p{font-size:.85rem;color:#333;line-height:1.6;margin-bottom:.3rem}.date-result pre{font-size:.85rem;color:#000;line-height:1.6;margin:0;font-family:"M PLUS Rounded 1c",Hiragino Kaku Gothic ProN,メイリオ,sans-serif}.grade-info{margin-top:.5rem;padding-top:.5rem;border-top:1px solid rgba(199,184,234,.3)}.grade-info p{font-size:.8rem;color:#555;margin-bottom:.3rem}.grade-info strong{color:var(--magnet-purple)}.event-btn{width:100%;padding:.6rem;font-size:.85rem;font-weight:700;background:#ffffffe6;color:#000;border:2px solid var(--magnet-purple);border-radius:.5rem;cursor:pointer;transition:all .2s;text-align:left}.event-btn:hover{background:#c7b8eae6;transform:translateY(-2px);box-shadow:0 4px 8px #c7b8ea66}.event-btn:active{transform:translateY(0)}.fortune-calculator{padding:1rem;display:flex;flex-direction:column;gap:1rem;overflow-y:auto;max-height:100%}.fortune-tabs{display:flex;gap:.3rem;margin-bottom:.5rem;flex-wrap:wrap}.fortune-tab{flex:1;min-width:70px;padding:.5rem .3rem;background:#ffffffe6;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .3s ease;font-size:.7rem;font-weight:700;color:#1a1a1a}.fortune-tab:hover{background:#fff3;transform:translateY(-2px)}.fortune-tab.active{background:linear-gradient(135deg,#a8edea,#fed6e3);border-color:var(--chalk-pink);color:#000;box-shadow:0 4px 15px #a8edea66}.fortune-input-section{background:#ffffff26;border-radius:12px;padding:1rem;margin-bottom:1rem}.fortune-input-section h3{font-size:.9rem;margin-bottom:.8rem;color:var(--chalk-yellow);text-align:center}:root[data-theme=business] .fortune-input-section{background:#ffffffb3;border:1px solid #e0e0e0;border-radius:8px}:root[data-theme=business] .fortune-input-section h3{color:var(--text-primary);text-shadow:none}.fortune-date-inputs{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap}.fortune-date-inputs span{color:#1a1a1a;font-weight:700}.fortune-input{width:70px;padding:.5rem;border-radius:8px;border:2px solid var(--chalk-blue);background:#ffffffe6;font-size:.9rem;text-align:center;font-weight:700;color:#000}.fortune-input:focus{outline:none;border-color:var(--chalk-pink);box-shadow:0 0 10px #ffb6c180}:root[data-theme=business] .fortune-input{border:1px solid #ddd;border-radius:4px;background:#fff;font-family:var(--font-family)}:root[data-theme=business] .fortune-input:focus{border-color:var(--accent-color);box-shadow:0 0 0 2px #2196f333}.fortune-calc-btn{width:100%;padding:.7rem;background:linear-gradient(135deg,var(--chalk-yellow) 0%,#ffd966 100%);border:none;border-radius:10px;font-size:1rem;font-weight:700;color:#000;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #fff8a84d;font-family:var(--font-family)}:root[data-theme=business] .fortune-calc-btn{background:var(--accent-gradient);color:var(--text-light);border-radius:4px;box-shadow:var(--shadow)}.fortune-calc-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #fff8a880}.fortune-calc-btn:active{transform:translateY(0)}.fortune-tab-content{animation:fadeIn .5s ease-out}.fortune-tab-content h3{font-size:1rem;margin-bottom:1rem;color:var(--chalk-yellow);text-align:center}:root[data-theme=business] .fortune-tab-content h3{color:var(--text-primary);text-shadow:none;font-weight:600}.fortune-card{background:#ffffffd9;border-radius:12px;padding:1rem;margin-bottom:1rem;border:2px solid rgba(255,255,255,.5);transition:all .3s ease}.fortune-card:hover{background:#fffffff2;transform:translateY(-2px);box-shadow:0 4px 15px #ffffff4d}.fortune-card h4{font-size:.9rem;margin-bottom:.8rem;color:#8b008b;line-height:1.4;font-weight:800;text-shadow:0 1px 2px rgba(0,0,0,.1)}.fortune-card h5{font-size:.8rem;margin-bottom:.5rem;color:#06c;font-weight:700}.fortune-card p{font-size:.75rem;line-height:1.7;margin-bottom:.6rem;color:#1a1a1a}.fortune-card ul{list-style:none;padding-left:0;font-size:.75rem}.fortune-card li{margin-bottom:.3rem;padding-left:.5rem;color:#1a1a1a}.constellation-badge,.numerology-badge,.weekday-badge,.zodiac-badge,.omikuji-badge{display:inline-block;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:700;margin-bottom:.7rem;text-align:center;box-shadow:0 2px 8px #0003}.constellation-badge{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.numerology-badge{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;font-size:1.2rem}.weekday-badge{color:#fff;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2,#f093fb)!important;box-shadow:0 4px 12px #667eea66}.zodiac-badge{background:linear-gradient(135deg,#ffecd2,#fcb69f);color:var(--chalk-purple)}.omikuji-badge{color:#fff;font-size:1rem}.fortune-comprehensive{display:flex;flex-direction:column;gap:1rem}.fortune-summary{background:linear-gradient(135deg,#ffffffe6,#ffffffd9);border-radius:12px;padding:1rem;border:2px solid var(--chalk-yellow);text-align:center}.fortune-summary h4{font-size:1rem;margin-bottom:.7rem;color:#daa520;font-weight:800;text-shadow:0 1px 2px rgba(0,0,0,.1)}.fortune-summary p{color:#1a1a1a}.fortune-detail-card{background:#ffffff1a;border-radius:10px;padding:.8rem;margin-bottom:.8rem;border:1px solid rgba(255,255,255,.2)}.fortune-detail-card p{color:#1a1a1a;line-height:1.7;margin-bottom:.5rem}.fortune-detail-card li{color:#1a1a1a;line-height:1.7;margin-bottom:.3rem}.constellation-detail,.numerology-detail,.weekday-detail,.omikuji-detail{display:flex;flex-direction:column;gap:.8rem}.constellation-header,.numerology-header,.weekday-header{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:#ffffff1a;border-radius:12px;margin-bottom:.5rem}.constellation-header h4,.numerology-header h4,.weekday-header h4{color:#1a1a1a}.constellation-symbol{font-size:2.5rem}.life-path-number{font-size:2.5rem;font-weight:700;color:var(--chalk-pink)}.life-path-emoji,.weekday-emoji{font-size:2rem}.lucky-colors,.lucky-numbers,.lucky-items{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.lucky-color-badge,.lucky-number-badge,.lucky-item-badge{padding:.3rem .7rem;border-radius:15px;font-size:.75rem;font-weight:700;background:linear-gradient(135deg,var(--chalk-yellow) 0%,#ffd966 100%);color:var(--chalk-purple);box-shadow:0 2px 5px #0003}.today-fortune-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem;margin-top:.5rem}.today-fortune-grid>div{background:#ffffff0d;padding:.5rem;border-radius:8px;font-size:.75rem;color:#1a1a1a}.omikuji-slip{border-radius:15px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 6px 20px #0000004d;text-align:center}.omikuji-level{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.omikuji-emoji{font-size:2.5rem}.omikuji-level h2{font-size:1.8rem;margin:0;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.omikuji-poem{font-size:.8rem;line-height:1.8;color:#fff;background:#0003;padding:1rem;border-radius:10px;font-family:serif;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.omikuji-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.8rem;margin-bottom:1rem}.omikuji-grid .fortune-detail-card p{color:#1a1a1a;line-height:1.7;margin-bottom:.5rem}.lucky-direction,.lucky-item{font-size:1.2rem;font-weight:700;color:var(--chalk-yellow);text-align:center}.omikuji-redraw-btn{width:100%;padding:.8rem;background:linear-gradient(135deg,var(--chalk-pink) 0%,#ff9a9e 100%);border:none;border-radius:10px;font-size:.9rem;font-weight:700;color:#fff;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #ffb6c14d}.omikuji-redraw-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ffb6c180}.omikuji-redraw-btn:active{transform:translateY(0)}.fortune-placeholder{text-align:center;padding:2rem 1rem;color:var(--text-secondary);font-size:.85rem;background:#ffffff0d;border-radius:12px;border:2px dashed rgba(255,255,255,.2)}@media(max-width:768px){.fortune-tabs{gap:.2rem}.fortune-tab{font-size:.65rem;padding:.4rem .2rem;min-width:60px}.fortune-input{width:60px;font-size:.8rem}.fortune-date-inputs{gap:.3rem}.omikuji-grid,.today-fortune-grid{grid-template-columns:1fr}.constellation-symbol,.life-path-number,.omikuji-emoji{font-size:2rem}.omikuji-level h2{font-size:1.5rem}.fortune-card h4{font-size:.85rem}.fortune-card p,.fortune-card li{font-size:.7rem}}
